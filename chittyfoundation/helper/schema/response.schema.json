{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://chitty.foundation/schemas/chittyhelper/response.schema.json",
  "title": "ChittyHelperResponse",
  "oneOf": [
    {
      "title": "DirectionalResponse",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "system",
        "system_class",
        "authoritative",
        "decision_safe",
        "response_type",
        "intent",
        "definition_state",
        "statement",
        "sources",
        "snapshot_time"
      ],
      "properties": {
        "system": { "const": "chittyhelper" },
        "system_class": { "const": "directional_architecture_navigator" },
        "authoritative": { "const": false },
        "decision_safe": { "const": false },
        "response_type": { "const": "directional" },
        "intent": {
          "type": "string",
          "enum": ["I_EXIST", "I_OWN", "I_DUP", "I_DIR"]
        },
        "definition_state": {
          "type": "string",
          "enum": [
            "DEFINED",
            "UNDEFINED",
            "IMPLICIT",
            "DISTRIBUTED",
            "CONTESTED"
          ]
        },
        "statement": {
          "type": "string",
          "minLength": 1,
          "description": "Single-sentence, present-tense statement.",
          "pattern": "^[^\n]+$"
        },
        "sources": {
          "type": "array",
          "minItems": 1,
          "items": { "type": "string", "format": "uri" }
        },
        "snapshot_time": { "type": "string", "format": "date-time" }
      }
    },
    {
      "title": "RefusalResponse",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "system",
        "response_type",
        "reason",
        "snapshot_time"
      ],
      "properties": {
        "system": { "const": "chittyhelper" },
        "response_type": { "const": "refusal" },
        "reason": { "type": "string", "enum": ["out_of_scope"] },
        "snapshot_time": { "type": "string", "format": "date-time" }
      }
    }
  ]
}

